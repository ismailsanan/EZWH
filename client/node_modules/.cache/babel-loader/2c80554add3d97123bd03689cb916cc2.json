{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ismae\\\\EzWh\\\\code\\\\client\\\\src\\\\DeliverIO.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Form, Row, Col, Button, Modal } from 'react-bootstrap';\nimport { useState } from 'react';\nimport './NewClientForm.css';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction DeliverIO(props) {\n  _s();\n\n  const [validated, setValidated] = useState(false);\n  const [id, setId] = useState(props.IOAccepted && props.IOAccepted.length > 0 ? props.IOAccepted[0].id : 0);\n  const [internalOrder, setInternalOrder] = useState({});\n  const [show, setShow] = useState(true);\n  const [products, setProducts] = useState([]);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setValidated(true);\n    const form = event.currentTarget;\n\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n    } else {\n      props.editIO(id, {\n        newState: \"COMPLETED\",\n        products: products\n      });\n      setId(0);\n      setValidated(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Registration\",\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      backdrop: \"static\",\n      keyboard: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"What Internal Order you want to deliver?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Select Internal Order\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 45,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                id: \"selectIO\",\n                onChange: e => {\n                  setId(e.target.value);\n                  const ident = e.target.value;\n\n                  for (let Io of props.IOAccepted) {\n                    if (ident * 1 === Io.id * 1) {\n                      setInternalOrder(Io);\n                      break;\n                    }\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Select Internal Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 23\n                }, this), props.IOAccepted.length > 0 ? props.IOAccepted.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: p.id,\n                  children: p.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 27\n                }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 46,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            className: \"m-3 ml-2 md-1 \",\n            children: \" Back to your page \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"warning\",\n          id: \"submitButton\",\n          disabled: props.IOAccepted && props.IOAccepted <= 0,\n          onClick: () => {\n            let listaProdotti = [];\n\n            for (let product of internalOrder.products) {\n              for (let i = 0; i < product.qty * 1; i++) {\n                //Find minimum of sku not in products array\n                let skuItem = undefined;\n                props.skuItems.filter(i => {\n                  if (i.Available * 1 === 0) return false;\n                  return !listaProdotti.map(p => p.RFID).includes(i.RFID);\n                }).forEach(item => {\n                  if (item.SKUId * 1 === product.SKUId && (!skuItem || item.DateOfStock < skuItem.DateOfStock)) {\n                    skuItem = item;\n                  }\n                }); //Add minimum to products array\n\n                listaProdotti.push({\n                  SkuID: skuItem.SKUId,\n                  RFID: skuItem.RFID\n                });\n              }\n            }\n\n            setProducts(listaProdotti);\n            setShow(false);\n          },\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      noValidate: true,\n      validated: validated,\n      onSubmit: handleSubmit,\n      className: \"pt-5\",\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center\",\n          children: \" Deliver Internal Order \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 8,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Id:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              autoFocus: true,\n              type: \"number\",\n              id: \"idField\",\n              disabled: true,\n              value: id,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n              type: \"invalid\",\n              children: \"Please insert a valid id.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            id: \"Products\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              className: products.length === 0 ? 'd-none' : '',\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                className: \"p-0\",\n                children: \"SKU Items to deliver: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 78\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 29\n            }, this), products.map((el, pos) => /*#__PURE__*/_jsxDEV(Row, {\n              className: \"border m-0 pt-1 pb-1\",\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                xs: 12,\n                className: \"ps-3\",\n                children: [pos + 1, \") SKU ID: \", el.SkuID, \" - RFID: \", el.RFID]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 56\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          xs: 6\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 1,\n          xs: 3,\n          className: \"pl-5\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"warning\",\n            color: \"black\",\n            id: \"submitButton\",\n            type: \"submit\",\n            className: \"float-right \",\n            children: \"Deliver Internal Order \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          xs: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DeliverIO, \"kpmRemVOlK+2k3d28gYm/o43IFQ=\");\n\n_c = DeliverIO;\nexport default DeliverIO;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeliverIO\");","map":{"version":3,"sources":["C:/Users/ismae/EzWh/code/client/src/DeliverIO.js"],"names":["React","Form","Row","Col","Button","Modal","useState","Link","DeliverIO","props","validated","setValidated","id","setId","IOAccepted","length","internalOrder","setInternalOrder","show","setShow","products","setProducts","handleSubmit","event","preventDefault","form","currentTarget","checkValidity","stopPropagation","editIO","newState","e","target","value","ident","Io","map","p","listaProdotti","product","i","qty","skuItem","undefined","skuItems","filter","Available","RFID","includes","forEach","item","SKUId","DateOfStock","push","SkuID","el","pos"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form, Row, Col, Button, Modal } from 'react-bootstrap';\r\nimport { useState } from 'react'\r\nimport './NewClientForm.css'\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction DeliverIO (props){\r\n\r\n  const [validated, setValidated] = useState(false);\r\n  const [id, setId] = useState (props.IOAccepted && props.IOAccepted.length > 0 ? (props.IOAccepted[0].id):(0));\r\n  const [internalOrder, setInternalOrder] = useState ({});\r\n  const [show,setShow] = useState (true);\r\n  const [products, setProducts] = useState ([]);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        setValidated(true);\r\n        const form = event.currentTarget;\r\n    \r\n        if (form.checkValidity() === false) {\r\n            event.stopPropagation();\r\n        } \r\n        else {\r\n            props.editIO(id,{newState:\"COMPLETED\",\r\n                            products: products});\r\n            setId(0);\r\n            setValidated(false);\r\n        }    \r\n    };\r\n\r\n    return (\r\n        <div className=\"Registration\" >\r\n\r\n            {/* MODAL TO SELECT INTERNAL ORDER ACCEPTED */}\r\n            <Modal show={show} \r\n            backdrop=\"static\"\r\n            keyboard={false}>\r\n            <Modal.Header>\r\n              <Modal.Title>What Internal Order you want to deliver?</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <Col>\r\n                <Form>\r\n                  <Form.Group>\r\n                    <Form.Label>Select Internal Order</Form.Label>\r\n                    <Form.Select\r\n                      id=\"selectIO\"\r\n                      onChange={(e) => {setId(e.target.value)\r\n                                        const ident = e.target.value;\r\n                                        for (let Io of props.IOAccepted){\r\n                                          if(ident*1 === Io.id*1){\r\n                                            setInternalOrder(Io);\r\n                                            break;\r\n                                          }\r\n                                        }\r\n                    }}\r\n                    >\r\n                      <option>\r\n                        Select Internal Order\r\n                      </option>\r\n                      {props.IOAccepted.length > 0 ? (\r\n                        props.IOAccepted.map((p) => (\r\n                          <option value={p.id}>\r\n                            {p.id}\r\n                          </option>\r\n                        ))\r\n                      ) : (\r\n                        <></>\r\n                      )}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                </Form>\r\n              </Col>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n            <Link to=\"/login\"> \r\n                    <Button variant=\"secondary\" className=\"m-3 ml-2 md-1 \"> Back to your page </Button> \r\n              </Link>\r\n              <Button variant=\"warning\" id=\"submitButton\" disabled={props.IOAccepted && (props.IOAccepted <= 0)} onClick={() => { \r\n                  let listaProdotti = [];\r\n                  for(let product of internalOrder.products){\r\n                    for (let i=0; i<product.qty*1;i++){\r\n                      //Find minimum of sku not in products array\r\n                      let skuItem=undefined;\r\n                      props.skuItems.filter((i)=>{\r\n                        if(i.Available*1 ===0)\r\n                          return false;\r\n                        return !listaProdotti.map((p)=>p.RFID).includes(i.RFID);\r\n                      })\r\n                      .forEach((item)=>{\r\n                        if(item.SKUId*1 === product.SKUId &&\r\n                          (!skuItem || item.DateOfStock < skuItem.DateOfStock)){\r\n                          skuItem = item;\r\n                        }\r\n                      })\r\n                      //Add minimum to products array\r\n                      listaProdotti.push({\r\n                        SkuID:skuItem.SKUId,\r\n                        RFID:skuItem.RFID\r\n                      })\r\n                    }\r\n                  }\r\n                  setProducts(listaProdotti);\r\n                  setShow(false) }}>\r\n                Submit\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n\r\n            <Form noValidate validated={validated} onSubmit={handleSubmit} className=\"pt-5\">\r\n                <Row className=\"justify-content-center\">\r\n                    <h2 className='text-center'> Deliver Internal Order </h2>\r\n                </Row>\r\n                <Row>\r\n                    <Col xs={2} />\r\n                    <Col xs={8}>\r\n                        <Form.Group>\r\n                            <Form.Label>Id:</Form.Label>\r\n                            <Form.Control\r\n                                autoFocus\r\n                                type='number'\r\n                                id=\"idField\"\r\n                                disabled={true}\r\n                                value={id}\r\n                                required\r\n                                />\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Please insert a valid id.\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col xs={2} />\r\n                </Row>\r\n                <br />\r\n                <Row>\r\n                    <Col>\r\n                        <Form.Group id=\"Products\">\r\n                            <Form.Label className={products.length===0 ? ('d-none'):('')}>\r\n                                <b className='p-0'>SKU Items to deliver: </b><br/>             \r\n                            </Form.Label>\r\n                                    \r\n                            {products.map((el, pos) => <Row className=\"border m-0 pt-1 pb-1\">\r\n                                        <Col xs={12} className=\"ps-3\">\r\n                                            {pos+1}) SKU ID: {el.SkuID} - RFID: {el.RFID}\r\n                                        </Col>\r\n                                        \r\n\r\n                                    </Row>)}\r\n\r\n                                    \r\n                                </Form.Group>\r\n                    </Col>\r\n                </Row>\r\n                <br />\r\n                <Row>\r\n                    <Col md={6} xs={6}/>\r\n                   \r\n                    <Col md={1} xs={3} className=\"pl-5\">\r\n                        <Button variant=\"warning\" color=\"black\" id=\"submitButton\" type=\"submit\" className=\"float-right \">Deliver Internal Order </Button>\r\n                    </Col>\r\n                    <Col md={3} xs={2}/>\r\n                </Row>\r\n            </Form >\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default DeliverIO;"]},"metadata":{},"sourceType":"module"}