{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ismae\\\\EzWh\\\\code\\\\client\\\\src\\\\NewReturnOrder.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Form, Row, Col, Button, Modal } from 'react-bootstrap';\nimport { useState } from 'react';\nimport './NewClientForm.css';\nimport { Plus, Trash } from \"react-bootstrap-icons\";\nimport { Link } from \"react-router-dom\";\nimport API from './API';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction NewReturnOrder(props) {\n  _s();\n\n  const [validated, setValidated] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [id, setId] = useState(props.RO && props.RO.length > 0 ? props.RO[0].id : 0);\n  const [restockOrder, setRestockOrder] = useState(undefined);\n  const [returnProducts, setReturnProducts] = useState([]);\n  const [addProducts, setAddProducts] = useState([]);\n  let date = new Date();\n  const options = {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric'\n  };\n  const [returnDate, setReturnDate] = useState(date.toLocaleString('ja-JP', options).replace(',', ''));\n  const [show, setShow] = useState(true);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setValidated(true);\n    const form = event.currentTarget;\n\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n    } else {\n      date = new Date();\n      setReturnDate(date.toLocaleString('ja-JP', options).replace(',', ''));\n      const newREO = {\n        returnDate: returnDate,\n        products: products,\n        restockOrderId: id\n      };\n      props.addREO(newREO, restockOrder.id);\n      setProducts([]);\n      setReturnProducts([]);\n      setAddProducts([]);\n      setId(0);\n      setValidated(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Registration\",\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      backdrop: \"static\",\n      keyboard: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Select Restock Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Select Restock Order to return products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                id: \"selectRO\",\n                onChange: e => {\n                  setId(e.target.value);\n                  const ident = e.target.value;\n\n                  for (let Ro of props.RO) {\n                    if (ident * 1 === Ro.id * 1) {\n                      setRestockOrder(Ro);\n                      setProducts([]);\n                      setAddProducts(Ro.skuItems);\n                      break;\n                    }\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Select Restock Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 23\n                }, this), props.RO.length > 0 ? props.RO.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: p.id,\n                  children: p.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 27\n                }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            className: \"m-3 ml-2 md-1 \",\n            children: \" Back to your page \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"warning\",\n          id: \"submitButton\",\n          disabled: props.RO && props.RO <= 0,\n          onClick: async () => {\n            const items = await API.getSKUItemsToReturn(restockOrder.id);\n            setReturnProducts(items);\n\n            for (let item of items) {\n              for (let product of restockOrder.products) {\n                if (product.SKUId * 1 === item.SKUId * 1) {\n                  const returnItem = {\n                    SKUId: item.SKUId,\n                    description: product.description,\n                    price: product.price,\n                    RFID: item.rfid\n                  };\n                  setProducts(oldList => [...oldList, returnItem]);\n                  setAddProducts(oldList => oldList.filter(p => p.rfid !== item.rfid));\n                }\n              }\n            }\n\n            setShow(false);\n          },\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      noValidate: true,\n      validated: validated,\n      onSubmit: handleSubmit,\n      className: \"pt-5\",\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center\",\n          children: \" New Return Order \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            id: \"Products\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              className: products.length === 0 ? 'd-none' : '',\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                className: \"p-0\",\n                children: \"SKU Items that will be returned: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 89\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this), products.map((el, pos) => /*#__PURE__*/_jsxDEV(Row, {\n              className: \"border m-0 pt-1 pb-1\",\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                xs: 10,\n                className: \"ps-3\",\n                children: [pos + 1, \") SKU ID: \", el.SKUId, \" - \", el.description, \" - RFID: \", el.RFID, \" - Price: \", el.price, \" \\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 41\n              }, this), !returnProducts.map(p => p.rfid).includes(el.RFID) && /*#__PURE__*/_jsxDEV(Col, {\n                xs: 2,\n                className: \"text-end\",\n                onClick: () => {\n                  setProducts(oldList => {\n                    const list = oldList.filter(uid => uid.RFID !== el.RFID);\n                    return list;\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(Trash, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 56\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            id: \"ProductsAdd\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                className: \"p-0\",\n                children: \"Add more SKU Items: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 76\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), addProducts.length > 0 && addProducts.map((el, pos) => /*#__PURE__*/_jsxDEV(Row, {\n              className: \"border m-0 pt-1 pb-1\",\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                xs: 10,\n                className: \"ps-3\",\n                children: [pos + 1, \") SKU ID: \", el.SKUId, \" - RFID: \", el.rfid]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                xs: 2,\n                className: \"text-end\",\n                onClick: () => {\n                  for (let product of restockOrder.products) {\n                    if (product.SKUId * 1 === el.SKUId * 1) {\n                      const returnItem = {\n                        SKUId: el.SKUId,\n                        description: product.description,\n                        price: product.price,\n                        RFID: el.rfid\n                      };\n                      setProducts(oldList => [...oldList, returnItem]);\n                    }\n                  }\n\n                  setAddProducts(oldPList => oldPList.filter(p => p.rfid !== el.rfid));\n                },\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 47\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          xs: 6\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          xs: 3,\n          className: \"pl-5\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"warning\",\n            color: \"black\",\n            id: \"submitButton\",\n            type: \"submit\",\n            className: \"float-right \",\n            children: \"Submit Return Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          xs: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n}\n\n_s(NewReturnOrder, \"56zS9PGFj4L+a63n7xCpwYnB+AU=\");\n\n_c = NewReturnOrder;\nexport default NewReturnOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewReturnOrder\");","map":{"version":3,"sources":["C:/Users/ismae/EzWh/code/client/src/NewReturnOrder.js"],"names":["React","Form","Row","Col","Button","Modal","useState","Plus","Trash","Link","API","NewReturnOrder","props","validated","setValidated","products","setProducts","id","setId","RO","length","restockOrder","setRestockOrder","undefined","returnProducts","setReturnProducts","addProducts","setAddProducts","date","Date","options","year","month","day","hour","minute","returnDate","setReturnDate","toLocaleString","replace","show","setShow","handleSubmit","event","preventDefault","form","currentTarget","checkValidity","stopPropagation","newREO","restockOrderId","addREO","e","target","value","ident","Ro","skuItems","map","p","items","getSKUItemsToReturn","item","product","SKUId","returnItem","description","price","RFID","rfid","oldList","filter","el","pos","includes","list","uid","oldPList"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form, Row, Col, Button, Modal } from 'react-bootstrap';\r\nimport { useState } from 'react'\r\nimport './NewClientForm.css'\r\nimport {Plus, Trash} from \"react-bootstrap-icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport API from './API';\r\n\r\nfunction NewReturnOrder(props) {\r\n    const [validated, setValidated] = useState(false);\r\n    const [products, setProducts] = useState ([]);\r\n    const [id, setId] = useState (props.RO && props.RO.length > 0 ? (props.RO[0].id):(0));\r\n    const [restockOrder, setRestockOrder] = useState (undefined);\r\n    const [returnProducts, setReturnProducts] = useState ([]);\r\n    const [addProducts, setAddProducts] = useState ([]);\r\n    \r\n    let date= new Date();\r\n    const options = { year: 'numeric', month: 'numeric', day: 'numeric', hour : 'numeric', minute: 'numeric' };\r\n    const [returnDate, setReturnDate] = useState (date.toLocaleString('ja-JP',options).replace(',',''));\r\n\r\n    const [show,setShow] = useState (true);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        setValidated(true);\r\n        const form = event.currentTarget;\r\n        if (form.checkValidity() === false ) {\r\n            event.stopPropagation();\r\n        \r\n        } else {\r\n                date = new Date();\r\n                setReturnDate(date.toLocaleString('ja-JP',options).replace(',',''));\r\n                const newREO = {\r\n                    returnDate:returnDate,\r\n                    products: products,\r\n                    restockOrderId: id\r\n                };\r\n    \r\n            props.addREO(newREO,restockOrder.id);\r\n            setProducts([]);\r\n            setReturnProducts([]);\r\n            setAddProducts([]);\r\n            setId(0);    \r\n            setValidated(false);\r\n        }\r\n        \r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"Registration\" >\r\n\r\n            {/* MODAL TO SELECT RESTOCK ORDER COMPLETEDRETURN */}\r\n            <Modal show={show} \r\n            backdrop=\"static\"\r\n            keyboard={false}>\r\n            <Modal.Header>\r\n              <Modal.Title>Select Restock Order</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <Col>\r\n                <Form>\r\n                  <Form.Group>\r\n                    <Form.Label>Select Restock Order to return products</Form.Label>\r\n                    <Form.Select\r\n                      id=\"selectRO\"\r\n                      onChange={(e) => {setId(e.target.value)\r\n                                        const ident = e.target.value;\r\n                                        for (let Ro of props.RO){\r\n                                          if(ident*1 === Ro.id*1){\r\n                                            setRestockOrder(Ro);\r\n                                            setProducts([]);\r\n                                            setAddProducts(Ro.skuItems);\r\n                                            break;\r\n                                          }\r\n                                        }\r\n                    }}\r\n                    >\r\n                      <option>\r\n                        Select Restock Order\r\n                      </option>\r\n                      {props.RO.length > 0 ? (\r\n                        props.RO.map((p) => (\r\n                          <option value={p.id}>\r\n                            {p.id}\r\n                          </option>\r\n                        ))\r\n                      ) : (\r\n                        <></>\r\n                      )}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                </Form>\r\n              </Col>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n            <Link to=\"/login\"> \r\n                    <Button variant=\"secondary\" className=\"m-3 ml-2 md-1 \"> Back to your page </Button> \r\n              </Link>\r\n              <Button variant=\"warning\" id=\"submitButton\" disabled={props.RO && (props.RO <= 0)} onClick={async () => { \r\n                  const items = await API.getSKUItemsToReturn(restockOrder.id);\r\n                  setReturnProducts(items);\r\n                  for (let item of items){\r\n                      for(let product of restockOrder.products){\r\n                        if(product.SKUId*1 === item.SKUId*1){\r\n                            const returnItem ={\r\n                                SKUId:item.SKUId,\r\n                                description:product.description,\r\n                                price:product.price,\r\n                                RFID:item.rfid\r\n                            }\r\n                            setProducts((oldList)=>[...oldList,returnItem]);\r\n                            setAddProducts((oldList)=>oldList.filter((p)=>p.rfid!==item.rfid))\r\n                        }\r\n                    }\r\n                  }\r\n                  setShow(false) }}>\r\n                Submit\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n\r\n            <Form noValidate validated={validated} onSubmit={handleSubmit} className=\"pt-5\">\r\n                <Row className=\"justify-content-center\">\r\n                    <h2 className='text-center'> New Return Order </h2>\r\n                </Row>\r\n                \r\n                \r\n                <Row>\r\n                    <Col>\r\n                        <Form.Group id=\"Products\">\r\n                            <Form.Label className={products.length===0 ? ('d-none'):('')}>\r\n                                <b className='p-0'>SKU Items that will be returned: </b><br/>             \r\n                            </Form.Label>\r\n                                    \r\n                            {products.map((el, pos) => <Row className=\"border m-0 pt-1 pb-1\">\r\n                                        <Col xs={10} className=\"ps-3\">\r\n                                            {pos+1}) SKU ID: {el.SKUId} - {el.description} - RFID: {el.RFID} - Price: {el.price} €\r\n                                        </Col>\r\n                                        {!returnProducts.map((p)=>p.rfid).includes(el.RFID) &&\r\n                                        <Col xs={2} className=\"text-end\"\r\n                                            onClick={() => {\r\n                                                \r\n                                                setProducts((oldList) => {\r\n                                                    const list = oldList.filter((uid) => uid.RFID !== el.RFID);\r\n                                                    return list;\r\n                                                })\r\n                                            }}\r\n                                        >\r\n                                            <Trash size={20} />\r\n                                        </Col>}\r\n\r\n                                    </Row>)}\r\n\r\n                                    \r\n                                </Form.Group>\r\n                    </Col>\r\n                </Row>\r\n                <br />\r\n\r\n                <Row>\r\n                    <Col>\r\n                        <Form.Group id=\"ProductsAdd\">\r\n                            <Form.Label>\r\n                                <b className='p-0'>Add more SKU Items: </b><br/>             \r\n                            </Form.Label>\r\n                                  \r\n                            {addProducts.length >0 && addProducts\r\n                            .map((el, pos) => <Row className=\"border m-0 pt-1 pb-1\">\r\n                                        <Col xs={10} className=\"ps-3\">\r\n                                            {pos+1}) SKU ID: {el.SKUId} - RFID: {el.rfid}\r\n                                        </Col>\r\n                                        \r\n                                        <Col xs={2} className=\"text-end\"\r\n                                            onClick={() => {\r\n                                                for(let product of restockOrder.products){\r\n                                                    if(product.SKUId*1 === el.SKUId*1){\r\n                                                        const returnItem ={\r\n                                                            SKUId:el.SKUId,\r\n                                                            description:product.description,\r\n                                                            price:product.price,\r\n                                                            RFID:el.rfid\r\n                                                        }\r\n                                                        setProducts((oldList)=>[...oldList,returnItem]);\r\n                                                    }\r\n                                                }\r\n                                                setAddProducts((oldPList)=>oldPList.filter((p)=>p.rfid !== el.rfid))\r\n\r\n                                            }}\r\n                                        >\r\n                                            <Plus size={20} />\r\n                                        </Col>\r\n\r\n                                    </Row>)}\r\n\r\n                                    \r\n                                </Form.Group>\r\n                    </Col>\r\n                </Row>\r\n                <br />\r\n                    \r\n                    \r\n               \r\n                \r\n                \r\n                <Row>\r\n                    <Col md={6} xs={6}/>\r\n                    <Col md={3} xs={3} className=\"pl-5\">\r\n                        <Button variant=\"warning\" color=\"black\" id=\"submitButton\" type=\"submit\" className=\"float-right \">Submit Return Order</Button>\r\n                    </Col>\r\n                    <Col md={3} xs={2}/>\r\n                </Row>\r\n            </Form >\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default NewReturnOrder;"]},"metadata":{},"sourceType":"module"}